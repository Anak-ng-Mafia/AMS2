<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<link rel="stylesheet" href="design.css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

<script src="Verify.js"></script>
<!------ Include the above in your HEAD tag ---------->

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<body class="home">
    <div class="container-fluid display-table">
        <div class="row display-table-row">
            <div class="col-md-2 col-sm-1 hidden-xs display-table-cell v-align box" id="navigation">
                <div class="logo">
                </div>
                <div class="navi">
                    <ul>
                    

                        <li><a href="forApproval.html"><i class="fa fa-tasks" aria-hidden="true"></i><span class="hidden-xs hidden-sm">For Approvals</span></a></li>
                        <li><a href="vetClinics.html"><i class="fa fa-bar-chart" aria-hidden="true"></i><span class="hidden-xs hidden-sm">Veterinary Clinics</span></a></li>
                        <li><a href="decline.html"><i class="fa fa-bar-chart" aria-hidden="true"></i><span class="hidden-xs hidden-sm">Decline Clinics</span></a></li>
                        <li><a href="petOwners.html"><i class="fa fa-bar-chart" aria-hidden="true"></i><span class="hidden-xs hidden-sm">Pet Owners</span></a></li>
                        
                    </ul>
                </div>
            </div>
            <div class="col-md-10 col-sm-11 display-table-cell v-align"> 
                <!--<button type="button" class="slide-toggle">Slide Toggle</button> -->
                <div class="row">
                    <header>
                        <div class="col-md-7">
                            <nav class="navbar-default pull-left">
                                <div class="navbar-header">
                
                                </div>
                            </nav>
                        </div>
                        <div class="col-md-5">
                            <div class="header-rightside">
                                <ul class="list-inline header-top pull-right">
                                    <a href="index.html" class="btn btn-info btn-lg">
                                        <span class="glyphicon glyphicon-log-out"></span> Log out
                                      </a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </header>
                </div>
                <div class="user-dashboard">
                    <h1>WELCOME TO DASHBOARD</h1>
                    <table class="table table-bordered" id = "dashboard">
                        <thead id = "ClinicsContainer">  
                          <tr>
                            <th scope="row" id="Vet"> Veterinary Clinics </th>
                            <th scope="row"> Remarks </th>
                            <th scope="row"> Government ID </th>
                            <th scope ="row"> Licensed ID </th>
                            <th scope="row" id="remarks"> Business Permit </th>
                      
                          </tr>
                        </thead>
                      </table>
                      </div>
                      
                         <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase.js"></script>
                          <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-analytics.js"></script>
                          <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-app.js"></script>
                          <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-firestore.js"></script>
                          <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-auth.js"></script>
                          <script src="https://www.gstatic.com/firebasejs/8.4.3/firebase-storage.js"></script>
                      <script>
                      
                      //Initialize Firebase 
                      
                       const firebaseConfig = {
                     apiKey: "AIzaSyA3R8A8sqZTFg0CQXkak5NDmQ8zw9Yoy1M",
                     authDomain: "vetify-baaef.firebaseapp.com",
                     projectId: "vetify-baaef",
                     storageBucket: "vetify-baaef.appspot.com",
                     messagingSenderId: "440813358357",
                     appId: "1:440813358357:web:7ddcc9b2d33eb6b45b6d1c",
                     measurementId: "G-7C8WM62W84"
                  };
                      
                          firebase.initializeApp(firebaseConfig);

                        var storage = firebase.storage();
                        var storageRef = storage.ref();
                      
                        </script>
                      
                      
                           <script> 
                            const vetclinics = document.querySelector('#dashboard')
                            var db = firebase.firestore();

                      function renderVeterinary(doc){
                      
                      
                      }

                      function AcceptVerification(id){
                        alert(id);
                        db.collection("clinics").doc(id).update({
                            status: "VERIFIED",
                        }).then((doc) => {
                            alert("Success");
                        })
                        }

                        function DeclineVerification(id){
                        alert(id);
                        db.collection("clinics").doc(id).update({
                            status: "REJECTED",
                        }).then((doc) => {
                            alert("Success");
                        })
                        }


                         var remarks =  db.collection('clinics').where('status', '==', 'PENDING_VERIFICATION');
                         remarks.get().then((snapshot) => {
                         snapshot.docs.forEach(doc => {
              

                          let li = document.createElement('tr');
                          let name = document.createElement('th');  
                          let Status = document.createElement('th');

                           

                        //   document.getElementById("dashboard").innerHTML += "<tr> <button onClick = 'AcceptVerification(`"+doc.id+"`)'> Accept </button></tr> <tr> " + doc.data().FullName+" </tr> <tr> " +doc.data().Status + " </tr>"
                            document.getElementById("dashboard").innerHTML += "<tr><td> " + doc.data().name+" </td> <td> " +doc.data().status + 
                            " </td> <td><img class='rounded-circle mr-1' class = 'requirement1' id = '" + 
                            doc.id + "req1' style='height: 150px; width:150px;'> </td> <td><img class='rounded-circle mr-1' id = '" + 
                            doc.id + "req2' class = 'requirement2' style='height: 150px; width:150px;'> </td> <td><img class='rounded-circle mr-1' class = 'requirement3' id = '" + 
                            doc.id+"req3' style='height: 150px; width:150px;'> </td>   <td><button onClick = 'AcceptVerification(`"+doc.id+"`)'> Accept </button> <button onClick = 'DeclineVerification(`"+doc.id+"`)'> Decline </button></td>  </tr>"
                        



                        try{ var img1 = document.getElementById(doc.id + "req1");
                         img1.setAttribute('src', doc.data().validIdUrl); }
                         catch{(error) => {
                        // Handle any errors
                        }};

                           // Or inserted into an <img> element
                       try{ var img1 = document.getElementById(doc.id + "req2");
                            img1.setAttribute('src', doc.data().vetLicense); }
                            catch{(error) => {
                        // Handle any errors
                        }};

                           // Or inserted into an <img> element
                       try{ var img1 = document.getElementById(doc.id + "req3");
                            img1.setAttribute('src', doc.data().businessPermit); }
                            catch{(error) => {
                        // Handle any errors
                        }};           



                      
                      
                          vetclinics.appendChild(li);
                      
                      })
                      })
                      
                      </script>
